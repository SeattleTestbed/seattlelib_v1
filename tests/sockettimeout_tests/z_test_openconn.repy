"""
<Description>
  Should act just like regular Repy socket.

<Date>
  Sun Mar  1 10:27:35 PST 2009
"""
include sockettimeout.repy

IP = 'sfadf'
PORT = 1332
IP_2 = 'sfadfafasd2'
PORT_2 = 13323
TO = 10

def test_openconn():
  sockobj = timeout_openconn(IP, PORT)
  assert sockobj.remote_address == (IP, PORT)
  assert sockobj.timeout == 5 # default

def test_openconn_optional_args():
  sockobj = timeout_openconn(IP, PORT, IP_2, PORT_2, TO)
  assert sockobj.remote_address == (IP, PORT)
  assert sockobj.local_address == (IP_2, PORT_2)
  assert sockobj.timeout == 10

########################

class TimeoutSocket(TimeoutSocket):
  def _openconn(*args): pass

def main():
  test_openconn()
  test_openconn_optional_args()

if callfunc == 'initialize':
  main()
